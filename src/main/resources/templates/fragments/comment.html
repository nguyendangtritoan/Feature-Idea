<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="commentThread" th:remove="tag">
	<div style="margin-left: 1em" th:each="comment : ${thread}">
		<div th:inline="text">
			<strong>[[${comment.user.name}]]</strong> - [[${#dates.format(comment.createdDate, 'MMM dd, yyyy h:mm a')}]]
		</div>
		<span th:text="${comment.text}">Example comment</span>
		<div>
			<button class="btn btn-link" style="margin-left: 12em" th:id="|replyBtn-${comment.id}|">reply</button>
		</div>
		<form class="d-none" method="post"
		      th:action="@{/products/{productId}/features/{featureId}/comments(productId=${feature.product.id},featureId=${feature.id})}"
		      th:id="|replyForm-${comment.id}|">
			<input th:name="${_csrf.parameterName}" th:value="${_csrf.token}" type="hidden" />
			<input name="parentId" th:id="|parentId-${comment.id}|" th:value="${comment.id}" type="hidden" />
			<div class="form-group" style="margin-top: 1.5em">
				<label for="textCom">Leave a comment below</label>
				<textarea class="form-control" id="textCom" name="childCommentText" rows="3"
				          th:id="|childCommentText-${comment.id}|"></textarea>
			</div>
			<div>
				<button class="btn btn-primary" type="submit">Add Comment</button>
			</div>
		</form>
		<hr />
		<div th:include="fragments/comment.html :: commentThread"
		     th:remove="tag" th:with="thread = ${comment.comments}"></div>
	</div>
</div>
</body>
</html>